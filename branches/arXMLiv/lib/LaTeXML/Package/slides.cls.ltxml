# -*- CPERL -*-
# /=====================================================================\ #
# |  slides.cls - Implementation for LaTeXML                            | #
# |                                                                     | #
# |=====================================================================| #
# | Part of LaTeXML:                                                    | #
# |  Public domain software, produced as part of work done by the       | #
# |  United States Government & not subject to copyright in the US.     | #
# |---------------------------------------------------------------------| #
# | http://dlmf.nist.gov/LaTeXML/                                       | #
# \=====================================================================/ #

package LaTeXML::Package::Pool;
use strict;
use LaTeXML::Package;

# NOTE: how's the best way to get verbatim material through?
LoadClass('article');

# TODO: Declare meaningful options
foreach my $option (qw()){
  DeclareOption($option, undef); }

# Pass all remaining options to article.cls
DeclareOption(undef,sub {
  PassOptions('article','cls',ToString(Digest(T_CS('\CurrentOption')))); });

#Bruce suggests we think of using \slidename for the formatted refnums (Useful in some cases?)
#DefMacro('\slidename','Slide');
NewCounter('slide','document',idprefix=>'sl');
NewCounter('equation', 'document', idprefix=>'E', idwithin=>'slide');
NewCounter('@equationgroup', 'document', idprefix=>'EG', idwithin=>'slide');
NewCounter('figure',   'document', idprefix=>'F', idwithin=>'slide');
NewCounter('table',    'document', idprefix=>'T', idwithin=>'slide');
#These counters are redefined here from article.cls and their idwithin attribute is changed.


DefEnvironment('{slide}', "<ltx:slide xml:id='#id' refnum='#refnum' frefnum='#frefnum'>#body</ltx:slide>",
properties=> sub { RefStepCounter('slide'); } );


# TODO: Declare note and overlay environment:
# NOTE: Should the note and overlay use the slide counter? Should they increment it?
DefEnvironment('{note}', "<ltx:slide xml:id='#id' refnum='#refnum' frefnum='#frefnum'>#body</ltx:slide>",
properties=> sub { RefStepCounter('slide'); } );
DefEnvironment('{overlay}', "<ltx:slide xml:id='#id' refnum='#refnum' frefnum='#frefnum'>#body</ltx:slide>",
properties=> sub { RefStepCounter('slide'); } );

# Disabling table of contents 
DefConstructor('\tableofcontents', undef);


1;
